define(["jquery","core/str","core/notification"],function(t,i,l){var e=function(o,t){this.selector=o,this.url=t,i.get_string("preview-pdf","block_coupon").then(function(o){this.title=o,this.setupHandlers()}.bind(this)).fail(l.exception)};return e.prototype.title=null,e.prototype.url=null,e.prototype.modal=null,e.prototype.selector=null,e.prototype.closeHandler=function(){this.destroy()},e.prototype.clickOutHandler=function(o){t(o.target)==this.modal&&this.destroy()},e.prototype.setupHandler=function(){var o='<div id="block-coupon-modal"><div class="block-coupon-modal-content">';o+='<div class="block-coupon-modal-header">',o+='<span id="block-modal-close" class="close">&times;</span>',o+="<h2>"+this.title+"</h2>",o+="</div>",o+='<div class="block-coupon-modal-body">',o+='<iframe src="'+this.url+'"></iframe>',o+="</div>",o+="</div></div>",this.modal=t(o),t("body").append(this.modal),this.modal.hide(),t("#block-modal-close").on("click",this.destroy.bind(this)),t("body").on("click",this.clickOutHandler.bind(this)),this.modal.show()},e.prototype.setupHandlers=function(){t(this.selector).on("click",this.setupHandler.bind(this))},e.prototype.destroy=function(){t("#block-modal-close").off("click"),t("body").off("click"),this.modal.hide(),this.modal.remove()},{init:function(o,t){new e(o,t)}}});